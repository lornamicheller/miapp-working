/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild } from '@angular/core';
import { NavParams, ModalController, IonSlides } from '@ionic/angular';
import { Observable } from 'rxjs';
import * as moment_ from 'moment';
// const memo = memo_.Resolver;
/** @type {?} */
const moment = moment_;
export class IonicTimepickerModalComponent {
    /**
     * @param {?} navParams
     * @param {?} modalCtrl
     */
    constructor(navParams, modalCtrl) {
        this.navParams = navParams;
        this.modalCtrl = modalCtrl;
        this.hoursArray = [];
        this.minutesArray = [];
        this.secondsArray = [];
        this.meridianArray = [];
        this.slideOptsHours = {
            centeredSlides: true,
            slidesPerView: 5,
            initialSlide: 0,
            direction: 'vertical',
            loop: true
        };
        this.slideOptsMinutes = {
            centeredSlides: true,
            slidesPerView: 5,
            initialSlide: 0,
            direction: 'vertical',
            loop: true
        };
        this.slideOptsSeconds = {
            centeredSlides: true,
            slidesPerView: 5,
            initialSlide: 0,
            direction: 'vertical',
            loop: true
        };
        this.slideOptsMeridian = {
            centeredSlides: true,
            slidesPerView: 5,
            initialSlide: 0,
            direction: 'vertical',
            loop: false
        };
        this.sliderHoursActiveIndex = 0;
        this.sliderMinutesActiveIndex = 0;
        this.sliderSecondsActiveIndex = 0;
        this.sliderMeridianActiveIndex = 0;
        this.mainObj = {};
        this.isReady = false;
        this.inItTimePicker().subscribe();
    }
    /**
     * @return {?}
     */
    ionViewDidEnter() {
        // this.inItTimePicker().subscribe();
        // this.inItTimePicker();
    }
    /**
     * @return {?}
     */
    inItTimePicker() {
        /** @type {?} */
        const myObservable = new Observable((/**
         * @param {?} observer
         * @return {?}
         */
        observer => {
            if (this.navParams.get('selectedTime')) {
                console.log('Selected time =>', this.navParams.get('selectedTime'));
                this.selectedTime = this.navParams.get('selectedTime');
            }
            this.mainObj = this.initTimePickerObject(this.navParams.get('objConfig'));
            this.setHoursArray(this.mainObj.timeFormat);
            this.setMinutesArray(this.mainObj.timeFormat);
            this.setSecondsArray(this.mainObj.timeFormat);
            this.setMeridianArray(this.mainObj.timeFormat);
            // setTimeout(() => {
            this.isReady = true;
            // }, 100);
            observer.complete();
        }));
        return myObservable;
    }
    // get slider hours active index
    /**
     * @param {?} event
     * @return {?}
     */
    onChangeHoursSlide(event) {
        this.sliderHoursActiveIndex = event.target.swiper.realIndex;
    }
    // get slider minutes active index
    /**
     * @param {?} event
     * @return {?}
     */
    onChangeMinutesSlide(event) {
        this.sliderMinutesActiveIndex = event.target.swiper.realIndex;
    }
    // get slider seconds active index
    /**
     * @param {?} event
     * @return {?}
     */
    onChangeSecondsSlide(event) {
        this.sliderSecondsActiveIndex = event.target.swiper.realIndex;
    }
    // get slider seconds active index
    /**
     * @param {?} event
     * @return {?}
     */
    onChangeMeridianSlide(event) {
        this.sliderMeridianActiveIndex = event.target.swiper.realIndex;
    }
    // initialize timepicker Object
    /**
     * @param {?} config
     * @return {?}
     */
    initTimePickerObject(config) {
        if (config.inputTime && !this.selectedTime) {
            this.selectedTime = config.inputTime;
        }
        /** @type {?} */
        const objConfig = {};
        objConfig.momentLocale = config.momentLocale ? config.momentLocale : 'en-US';
        moment.locale(objConfig.momentLocale);
        objConfig.timeFormat = config.timeFormat ? config.timeFormat : 'hh:mm A';
        if (typeof (this.selectedTime) === 'string') {
            this.momentObj = this.selectedTime ?
                moment(this.selectedTime, objConfig.timeFormat) :
                moment(moment(new Date().getTime()));
        }
        else {
            this.momentObj = this.selectedTime ?
                moment(this.selectedTime) :
                moment(moment(new Date().getTime()));
        }
        objConfig.setLabel = config.setLabel ? config.setLabel : 'Set';
        objConfig.closeLabel = config.closeLabel ? config.closeLabel : 'Close';
        objConfig.titleLabel = config.titleLabel ? config.titleLabel : 'Time';
        objConfig.btnCloseSetInReverse = config.btnCloseSetInReverse ? config.btnCloseSetInReverse : false;
        objConfig.btnProperties = {};
        if (config.btnProperties) {
            /** @type {?} */
            const btnProperties = config.btnProperties;
            objConfig.btnProperties.expand = btnProperties.expand ? btnProperties.expand : 'block';
            objConfig.btnProperties.fill = btnProperties.fill ? btnProperties.fill : 'solid';
            objConfig.btnProperties.size = btnProperties.size ? btnProperties.size : 'default';
            objConfig.btnProperties.color = btnProperties.color ? btnProperties.color : '';
            objConfig.btnProperties.disabled = btnProperties.disabled ? btnProperties.disabled : false;
            objConfig.btnProperties.strong = btnProperties.strong ? btnProperties.strong : false;
        }
        else {
            objConfig.btnProperties.expand = 'block';
            objConfig.btnProperties.fill = 'solid';
            objConfig.btnProperties.size = 'default';
            objConfig.btnProperties.disabled = false;
            objConfig.btnProperties.strong = false;
        }
        return objConfig;
    }
    // close modal
    /**
     * @return {?}
     */
    closeIonicTimePickerModal() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const modal = yield this.modalCtrl.getTop();
            modal.dismiss('');
        });
    }
    // set time in modal dismiss method
    /**
     * @return {?}
     */
    setIonicTimePickerTime() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            /** @type {?} */
            const modal = yield this.modalCtrl.getTop();
            this.selectedTime = this.setTimeInMomentObject();
            modal.dismiss({ time: (this.selectedTime) });
        });
    }
    // set time in moment object
    /**
     * @return {?}
     */
    setTimeInMomentObject() {
        /** @type {?} */
        const formateArray = [];
        /** @type {?} */
        const timeArray = [];
        /** @type {?} */
        const charZeroInLocale = moment().second(0).format('s');
        // console.log('charZeroInLocale : ' + charZeroInLocale);
        if (this.mainObj.timeFormat.indexOf('H') >= 0) {
            formateArray.push('H');
            /** @type {?} */
            let hourString = this.hoursArray[this.sliderHoursActiveIndex];
            // hourString = hourString.replace(/^0+/, '');
            timeArray.push(hourString);
        }
        if (this.mainObj.timeFormat.indexOf('h') >= 0) {
            formateArray.push('h');
            /** @type {?} */
            let hourString = this.hoursArray[this.sliderHoursActiveIndex];
            // hourString = hourString.replace(/^0+/, '');
            timeArray.push(hourString);
        }
        if (this.mainObj.timeFormat.indexOf('k') >= 0) {
            formateArray.push('k');
            /** @type {?} */
            let hourString = this.hoursArray[this.sliderHoursActiveIndex];
            // hourString = hourString.replace(/^0+/, '');
            timeArray.push(hourString);
        }
        if (this.mainObj.timeFormat.indexOf('m') >= 0) {
            formateArray.push('m');
            /** @type {?} */
            let minString = this.minutesArray[this.sliderMinutesActiveIndex];
            // minString = minString.replace(/^0+/, '');
            timeArray.push(minString);
        }
        if (this.mainObj.timeFormat.indexOf('s') >= 0) {
            formateArray.push('s');
            /** @type {?} */
            let secString = this.secondsArray[this.sliderSecondsActiveIndex];
            // secString = secString.replace(/^0+/, '');
            timeArray.push(secString);
        }
        if (this.mainObj.timeFormat.indexOf('a') >= 0 || this.mainObj.timeFormat.indexOf('A') >= 0) {
            formateArray.push('a');
            /** @type {?} */
            let meridianString = this.meridianArray[this.sliderMeridianActiveIndex].toLowerCase();
            timeArray.push(meridianString);
        }
        /** @type {?} */
        const formateString = formateArray.join(':');
        /** @type {?} */
        const timeString = timeArray.join(':');
        // this.momentObj = mmObj;
        // console.log('timeString: ' + timeString + '  formateString: ' + formateString);
        /** @type {?} */
        const mmObj = moment(timeString, formateString);
        return mmObj.format(this.mainObj.timeFormat);
    }
    // sets hours array
    /**
     * @param {?} timeFormat
     * @return {?}
     */
    setHoursArray(timeFormat) {
        /** @type {?} */
        const obj = moment().startOf('date');
        if (timeFormat.indexOf('HH') >= 0) {
            this.hoursArray = this.initHoursArray(obj, 23, 'HH');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('HH');
        }
        else if (timeFormat.indexOf('H') >= 0) {
            this.hoursArray = this.initHoursArray(obj, 23, 'H');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('H');
        }
        else if (timeFormat.indexOf('hh') >= 0) {
            this.hoursArray = this.initHoursArray(obj.add(1, 'hours'), 11, 'hh');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('hh') - 1;
        }
        else if (timeFormat.indexOf('h') >= 0) {
            this.hoursArray = this.initHoursArray(obj.add(1, 'hours'), 11, 'h');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('h') - 1;
        }
        else if (timeFormat.indexOf('kk') >= 0) {
            this.hoursArray = this.initHoursArray(obj.add(1, 'hours'), 23, 'kk');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('kk') - 1;
        }
        else if (timeFormat.indexOf('k') >= 0) {
            this.hoursArray = this.initHoursArray(obj.add(1, 'hours'), 23, 'k');
            this.slideOptsHours.initialSlide = this.momentObj.locale('en').format('k') - 1;
        }
        // console.log('hours array =>', this.hoursArray);
    }
    // Initialize hours array
    /**
     * @param {?} momentObj
     * @param {?} end
     * @param {?} format
     * @return {?}
     */
    initHoursArray(momentObj, end, format) {
        /** @type {?} */
        const hoursArray = [];
        for (let i = 0; i <= end; i++) {
            hoursArray.push(momentObj.format(format));
            momentObj.add(1, 'hours');
        }
        return hoursArray;
    }
    // sets minutes array
    /**
     * @param {?} timeFormat
     * @return {?}
     */
    setMinutesArray(timeFormat) {
        if (timeFormat.indexOf('mm') >= 0) {
            this.minutesArray = this.initMinutesArray('mm');
            this.slideOptsMinutes.initialSlide = Number(this.momentObj.format('mm'));
        }
        else if (timeFormat.indexOf('m') >= 0) {
            this.minutesArray = this.initMinutesArray('m');
            this.slideOptsMinutes.initialSlide = Number(this.momentObj.format('m'));
        }
        // console.log('minutes array =>', this.minutesArray);
    }
    // initialize minutes array
    /**
     * @param {?} format
     * @return {?}
     */
    initMinutesArray(format) {
        /** @type {?} */
        const obj = moment().startOf('hour');
        /** @type {?} */
        const minutesArray = [];
        for (let i = 0; i < 60; i++) {
            minutesArray.push(obj.format(format));
            obj.add(1, 'minutes');
        }
        return minutesArray;
    }
    // sets seconds array
    /**
     * @param {?} timeFormat
     * @return {?}
     */
    setSecondsArray(timeFormat) {
        if (timeFormat.indexOf('ss') >= 0) {
            this.secondsArray = this.initSecondsArray('ss');
            this.slideOptsSeconds.initialSlide = Number(this.momentObj.format('ss'));
        }
        else if (timeFormat.indexOf('s') >= 0) {
            this.secondsArray = this.initSecondsArray('s');
            this.slideOptsSeconds.initialSlide = Number(this.momentObj.format('s'));
        }
        // console.log('seconds array =>', this.secondsArray);
    }
    // initialize seconds array
    /**
     * @param {?} format
     * @return {?}
     */
    initSecondsArray(format) {
        /** @type {?} */
        const obj = moment().startOf('minute');
        /** @type {?} */
        const secondsArray = [];
        for (let i = 0; i < 60; i++) {
            secondsArray.push(obj.format(format));
            obj.add(1, 'seconds');
        }
        return secondsArray;
    }
    // set meridian array
    /**
     * @param {?} timeFormat
     * @return {?}
     */
    setMeridianArray(timeFormat) {
        if (timeFormat.indexOf('a') >= 0 || timeFormat.indexOf('A') >= 0) {
            /** @type {?} */
            const format = timeFormat.indexOf('a') >= 0 ? 'a' : 'A';
            /** @type {?} */
            const obj = moment().startOf('date');
            this.meridianArray.push(obj.format(format));
            this.meridianArray.push(obj.add(12, 'hours').format(format));
        }
        // console.log('meridian array =>', this.meridianArray);
        if (timeFormat.indexOf('a') >= 0) {
            this.slideOptsMeridian.initialSlide = this.momentObj.format('a') === 'am' ? 0 : 1;
        }
        else if (timeFormat.indexOf('A') >= 0) {
            this.slideOptsMeridian.initialSlide = this.momentObj.format('A') === 'AM' ? 0 : 1;
        }
    }
}
IonicTimepickerModalComponent.decorators = [
    { type: Component, args: [{
                selector: 'li-ionic-timepicker-modal',
                template: "<ion-header>\n  <ion-toolbar>\n    <ion-title>\n      {{mainObj?.titleLabel}}\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n\n\n\n<ion-content scrollX=\"false\" scrollY=\"false\" >\n  <!-- <div class=\"loader\" *ngIf=\"!isReady\"></div> -->\n\n  <div class=\"tp-active\" [ngClass]=\"{'isReady': isReady}\"></div>\n\n  <ion-grid class=\"tp-slide-container\" [ngClass]=\"{'isReady': isReady}\">\n    <ion-row>\n      <ion-col>\n        <ion-slides #sliderHours pager=\"false\" [options]=\"slideOptsHours\" (ionSlideWillChange)=\"onChangeHoursSlide($event)\">\n          <ion-slide *ngFor=\"let hour of hoursArray; let i = index;\" class=\"tp-default-slide\">\n            {{ hour }}\n          </ion-slide>\n        </ion-slides>\n      </ion-col>\n\n      <ion-col size=\"1\" class=\"tp-colon\" *ngIf=\"minutesArray?.length > 0\">\n        <ion-label>:</ion-label>\n      </ion-col>\n      <ion-col *ngIf=\"minutesArray?.length > 0\">\n        <ion-slides #sliderMinutes pager=\"false\" [options]=\"slideOptsMinutes\" (ionSlideWillChange)=\"onChangeMinutesSlide($event)\">\n          <ion-slide *ngFor=\"let minute of minutesArray; let i = index;\" class=\"tp-default-slide\">\n            {{ minute }}\n          </ion-slide>\n        </ion-slides>\n      </ion-col>\n\n      <ion-col size=\"1\" class=\"tp-colon\" *ngIf=\"secondsArray?.length > 0\">\n        <ion-label>:</ion-label>\n      </ion-col>\n      <ion-col *ngIf=\"secondsArray?.length > 0\">\n        <ion-slides #sliderSeconds pager=\"false\" [options]=\"slideOptsSeconds\" (ionSlideWillChange)=\"onChangeSecondsSlide($event)\">\n          <ion-slide *ngFor=\"let second of secondsArray; let i = index ;\" class=\"tp-default-slide\">\n            {{ second }}\n          </ion-slide>\n        </ion-slides>\n      </ion-col>\n\n      <ion-col size=\"1\" class=\"tp-colon\" *ngIf=\"meridianArray?.length > 0\">\n        <ion-label>:</ion-label>\n      </ion-col>\n      <ion-col *ngIf=\"meridianArray?.length > 0\">\n        <ion-slides #sliderMeridian pager=\"false\" [options]=\"slideOptsMeridian\" (ionSlideWillChange)=\"onChangeMeridianSlide($event)\">\n          <ion-slide *ngFor=\"let meridian of meridianArray; let i = index ;\" class=\"tp-default-slide\">\n            {{ meridian }}\n          </ion-slide>\n        </ion-slides>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n</ion-content>\n\n<ion-footer [ngClass]=\"{'isReady': isReady}\">\n  <ion-toolbar>\n    <ion-grid no-padding>\n      <ion-row no-padding [ngClass]=\"mainObj?.btnCloseSetInReverse ? 'dp-btn-set-close-in-reverse' : ''\">\n        <ion-col size=\"6\" no-padding>\n          <ion-button class=\"ion-button\" expand=\"{{mainObj?.btnProperties?.expand}}\" fill=\"{{mainObj?.btnProperties?.fill}}\"\n            size=\"{{mainObj?.btnProperties?.size}}\" color=\"{{mainObj?.btnProperties?.color}}\" disabled=\"{{mainObj?.btnProperties?.disabled}}\"\n            strong=\"{{mainObj?.btnProperties?.strong}}\" (click)=\"closeIonicTimePickerModal()\">\n            {{mainObj?.closeLabel}}\n          </ion-button>\n        </ion-col>\n        <ion-col size=\"6\" no-padding>\n          <ion-button class=\"ion-button\" expand=\"{{mainObj?.btnProperties?.expand}}\" fill=\"{{mainObj?.btnProperties?.fill}}\"\n            size=\"{{mainObj?.btnProperties?.size}}\" color=\"{{mainObj?.btnProperties?.color}}\" disabled=\"{{mainObj?.btnProperties?.disabled}}\"\n            strong=\"{{mainObj?.btnProperties?.strong}}\" (click)=\"setIonicTimePickerTime()\">\n            {{mainObj?.setLabel}}\n          </ion-button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>",
                styles: [":host ion-header{height:48px}:host ion-header ion-toolbar{--background:var(--ion-color-primary);height:100%;align-items:center;display:flex;color:var(--ion-color-primary-contrast)}:host ion-header ion-toolbar ion-title{font-size:20px;font-weight:700;text-align:center}@media (min-width:768px){:host ion-header ion-toolbar ion-title{font-size:22px}}:host ion-footer{height:44px}:host ion-footer ion-toolbar{--min-height:100%;--border-width:0;--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px}:host ion-footer ion-toolbar .dp-btn-set-close-in-reverse{flex-direction:row-reverse}:host ion-footer ion-toolbar ion-button{--border-radius:0;height:44px;margin:0}:host ion-footer ion-toolbar ion-button:focus{outline:0}:host ion-footer ion-toolbar ion-button.activated{--background-activated:var(--ion-color-primary-tint);--color-activated:white}:host .swiper-slide-active{color:var(--ion-color-primary)!important;font-size:20px!important}:host .tp-default-slide{color:#adadad;font-size:16px}:host .tp-slide-container{padding:5px!important;position:relative}:host .tp-slide-container ion-slides{height:165px}:host .tp-slide-container .tp-colon{font-style:bold;font-weight:700;margin-bottom:3px;display:flex;align-items:center;justify-content:center}:host .tp-active{position:absolute;top:76px;left:5px;width:300px;height:33px;background-color:#d3d3d3}:host .tp-active,:host .tp-slide-container,:host ion-footer{opacity:0}:host .isReady{opacity:1;transition:opacity .4s ease-in}:host .loader{border:5px solid #f3f3f3;border-radius:50%;border-top:5px solid var(--ion-color-primary);width:50px;height:50px;-webkit-animation:2s linear infinite spin;animation:2s linear infinite spin;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}"]
            }] }
];
/** @nocollapse */
IonicTimepickerModalComponent.ctorParameters = () => [
    { type: NavParams },
    { type: ModalController }
];
IonicTimepickerModalComponent.propDecorators = {
    sliderHours: [{ type: ViewChild, args: ['sliderHours',] }],
    sliderMinutes: [{ type: ViewChild, args: ['sliderMinutes',] }],
    sliderSeconds: [{ type: ViewChild, args: ['sliderSeconds',] }],
    sliderMeridian: [{ type: ViewChild, args: ['sliderMeridian',] }]
};
if (false) {
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderHours;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderMinutes;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderSeconds;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderMeridian;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.hoursArray;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.minutesArray;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.secondsArray;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.meridianArray;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.slideOptsHours;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.slideOptsMinutes;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.slideOptsSeconds;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.slideOptsMeridian;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderHoursActiveIndex;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderMinutesActiveIndex;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderSecondsActiveIndex;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.sliderMeridianActiveIndex;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.momentObj;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.mainObj;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.selectedTime;
    /** @type {?} */
    IonicTimepickerModalComponent.prototype.isReady;
    /**
     * @type {?}
     * @private
     */
    IonicTimepickerModalComponent.prototype.navParams;
    /**
     * @type {?}
     * @private
     */
    IonicTimepickerModalComponent.prototype.modalCtrl;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW9uaWMtdGltZXBpY2tlci1tb2RhbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbG9naXN0aWNpbmZvdGVjaC9pb25pYy10aW1lcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2lvbmljLXRpbWVwaWNrZXItbW9kYWwvaW9uaWMtdGltZXBpY2tlci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyRCxPQUFPLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRWxDLE9BQU8sS0FBSyxPQUFPLE1BQU0sUUFBUSxDQUFDOzs7TUFHNUIsTUFBTSxHQUFHLE9BQU87QUFPdEIsTUFBTSxPQUFPLDZCQUE2Qjs7Ozs7SUF1RHhDLFlBQ1UsU0FBb0IsRUFDcEIsU0FBMEI7UUFEMUIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNwQixjQUFTLEdBQVQsU0FBUyxDQUFpQjtRQWxEcEMsZUFBVSxHQUFRLEVBQUUsQ0FBQztRQUNyQixpQkFBWSxHQUFRLEVBQUUsQ0FBQztRQUN2QixpQkFBWSxHQUFRLEVBQUUsQ0FBQztRQUN2QixrQkFBYSxHQUFRLEVBQUUsQ0FBQztRQUV4QixtQkFBYyxHQUFHO1lBQ2YsY0FBYyxFQUFFLElBQUk7WUFDcEIsYUFBYSxFQUFFLENBQUM7WUFDaEIsWUFBWSxFQUFFLENBQUM7WUFDZixTQUFTLEVBQUUsVUFBVTtZQUNyQixJQUFJLEVBQUUsSUFBSTtTQUNYLENBQUM7UUFFRixxQkFBZ0IsR0FBRztZQUNqQixjQUFjLEVBQUUsSUFBSTtZQUNwQixhQUFhLEVBQUUsQ0FBQztZQUNoQixZQUFZLEVBQUUsQ0FBQztZQUNmLFNBQVMsRUFBRSxVQUFVO1lBQ3JCLElBQUksRUFBRSxJQUFJ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OzthQUV2RDs7OztZQVhRLFNBQVM7WUFBRSxlQUFlOzs7MEJBZWhDLFNBQVMsU0FBQyxhQUFhOzRCQUN2QixTQUFTLFNBQUMsZUFBZTs0QkFDekIsU0FBUyxTQUFDLGVBQWU7NkJBQ3pCLFNBQVMsU0FBQyxnQkFBZ0I7Ozs7SUFIM0Isb0RBQWlEOztJQUNqRCxzREFBcUQ7O0lBQ3JELHNEQUFxRDs7SUFDckQsdURBQXVEOztJQUV2RCxtREFBcUI7O0lBQ3JCLHFEQUF1Qjs7SUFDdkIscURBQXVCOztJQUN2QixzREFBd0I7O0lBRXhCLHVEQU1FOztJQUVGLHlEQU1FOztJQUVGLHlEQU1FOztJQUVGLDBEQU1FOztJQUVGLCtEQUEyQjs7SUFDM0IsaUVBQTZCOztJQUM3QixpRUFBNkI7O0lBQzdCLGtFQUE4Qjs7SUFFOUIsa0RBQVU7O0lBQ1YsZ0RBQWtCOztJQUNsQixxREFBa0I7O0lBRWxCLGdEQUFnQjs7Ozs7SUFHZCxrREFBNEI7Ozs7O0lBQzVCLGtEQUFrQyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5hdlBhcmFtcywgTW9kYWxDb250cm9sbGVyLCBJb25TbGlkZXMgfSBmcm9tICdAaW9uaWMvYW5ndWxhcic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCAqIGFzIG1vbWVudF8gZnJvbSAnbW9tZW50JztcblxuLy8gY29uc3QgbWVtbyA9IG1lbW9fLlJlc29sdmVyO1xuY29uc3QgbW9tZW50ID0gbW9tZW50XztcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpLWlvbmljLXRpbWVwaWNrZXItbW9kYWwnLFxuICB0ZW1wbGF0ZVVybDogJy4vaW9uaWMtdGltZXBpY2tlci1tb2RhbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2lvbmljLXRpbWVwaWNrZXItbW9kYWwuY29tcG9uZW50LnNjc3MnXVxufSlcblxuZXhwb3J0IGNsYXNzIElvbmljVGltZXBpY2tlck1vZGFsQ29tcG9uZW50IHtcblxuICBAVmlld0NoaWxkKCdzbGlkZXJIb3VycycpIHNsaWRlckhvdXJzOiBJb25TbGlkZXM7XG4gIEBWaWV3Q2hpbGQoJ3NsaWRlck1pbnV0ZXMnKSBzbGlkZXJNaW51dGVzOiBJb25TbGlkZXM7XG4gIEBWaWV3Q2hpbGQoJ3NsaWRlclNlY29uZHMnKSBzbGlkZXJTZWNvbmRzOiBJb25TbGlkZXM7XG4gIEBWaWV3Q2hpbGQoJ3NsaWRlck1lcmlkaWFuJykgc2xpZGVyTWVyaWRpYW46IElvblNsaWRlcztcblxuICBob3Vyc0FycmF5OiBhbnkgPSBbXTtcbiAgbWludXRlc0FycmF5OiBhbnkgPSBbXTtcbiAgc2Vjb25kc0FycmF5OiBhbnkgPSBbXTtcbiAgbWVyaWRpYW5BcnJheTogYW55ID0gW107XG5cbiAgc2xpZGVPcHRzSG91cnMgPSB7XG4gICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXG4gICAgc2xpZGVzUGVyVmlldzogNSxcbiAgICBpbml0aWFsU2xpZGU6IDAsXG4gICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgIGxvb3A6IHRydWVcbiAgfTtcblxuICBzbGlkZU9wdHNNaW51dGVzID0ge1xuICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxuICAgIHNsaWRlc1BlclZpZXc6IDUsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICBsb29wOiB0cnVlXG4gIH07XG5cbiAgc2xpZGVPcHRzU2Vjb25kcyA9IHtcbiAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcbiAgICBzbGlkZXNQZXJWaWV3OiA1LFxuICAgIGluaXRpYWxTbGlkZTogMCxcbiAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgbG9vcDogdHJ1ZVxuICB9O1xuXG4gIHNsaWRlT3B0c01lcmlkaWFuID0ge1xuICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxuICAgIHNsaWRlc1BlclZpZXc6IDUsXG4gICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICBsb29wOiBmYWxzZVxuICB9O1xuXG4gIHNsaWRlckhvdXJzQWN0aXZlSW5kZXggPSAwO1xuICBzbGlkZXJNaW51dGVzQWN0aXZlSW5kZXggPSAwO1xuICBzbGlkZXJTZWNvbmRzQWN0aXZlSW5kZXggPSAwO1xuICBzbGlkZXJNZXJpZGlhbkFjdGl2ZUluZGV4ID0gMDtcblxuICBtb21lbnRPYmo7XG4gIG1haW5PYmo6IGFueSA9IHt9O1xuICBzZWxlY3RlZFRpbWU6IGFueTtcblxuICBpc1JlYWR5ID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBuYXZQYXJhbXM6IE5hdlBhcmFtcyxcbiAgICBwcml2YXRlIG1vZGFsQ3RybDogTW9kYWxDb250cm9sbGVyXG4gICkge1xuICAgIHRoaXMuaW5JdFRpbWVQaWNrZXIoKS5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIGlvblZpZXdEaWRFbnRlcigpIHtcbiAgICAvLyB0aGlzLmluSXRUaW1lUGlja2VyKCkuc3Vic2NyaWJlKCk7XG4gICAgLy8gdGhpcy5pbkl0VGltZVBpY2tlcigpO1xuICB9XG5cbiAgaW5JdFRpbWVQaWNrZXIoKSA6IE9ic2VydmFibGU8YW55PiB7XG4gICAgY29uc3QgbXlPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgaWYgKHRoaXMubmF2UGFyYW1zLmdldCgnc2VsZWN0ZWRUaW1lJykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NlbGVjdGVkIHRpbWUgPT4nLCB0aGlzLm5hdlBhcmFtcy5nZXQoJ3NlbGVjdGVkVGltZScpKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRpbWUgPSB0aGlzLm5hdlBhcmFtcy5nZXQoJ3NlbGVjdGVkVGltZScpO1xuICAgICAgfVxuICAgICAgdGhpcy5tYWluT2JqID0gdGhpcy5pbml0VGltZVBpY2tlck9iamVjdCh0aGlzLm5hdlBhcmFtcy5nZXQoJ29iakNvbmZpZycpKTtcblxuICAgICAgdGhpcy5zZXRIb3Vyc0FycmF5KHRoaXMubWFpbk9iai50aW1lRm9ybWF0KTtcbiAgICAgIHRoaXMuc2V0TWludXRlc0FycmF5KHRoaXMubWFpbk9iai50aW1lRm9ybWF0KTtcbiAgICAgIHRoaXMuc2V0U2Vjb25kc0FycmF5KHRoaXMubWFpbk9iai50aW1lRm9ybWF0KTtcbiAgICAgIHRoaXMuc2V0TWVyaWRpYW5BcnJheSh0aGlzLm1haW5PYmoudGltZUZvcm1hdCk7XG5cbiAgICAgIC8vIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuICAgICAgLy8gfSwgMTAwKTtcblxuICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBteU9ic2VydmFibGU7XG5cbiAgfVxuXG5cbiAgLy8gZ2V0IHNsaWRlciBob3VycyBhY3RpdmUgaW5kZXhcbiAgb25DaGFuZ2VIb3Vyc1NsaWRlKGV2ZW50KSB7XG4gICAgdGhpcy5zbGlkZXJIb3Vyc0FjdGl2ZUluZGV4ID0gZXZlbnQudGFyZ2V0LnN3aXBlci5yZWFsSW5kZXg7XG4gIH1cblxuICAvLyBnZXQgc2xpZGVyIG1pbnV0ZXMgYWN0aXZlIGluZGV4XG4gIG9uQ2hhbmdlTWludXRlc1NsaWRlKGV2ZW50KSB7XG4gICAgdGhpcy5zbGlkZXJNaW51dGVzQWN0aXZlSW5kZXggPSBldmVudC50YXJnZXQuc3dpcGVyLnJlYWxJbmRleDtcbiAgfVxuXG4gIC8vIGdldCBzbGlkZXIgc2Vjb25kcyBhY3RpdmUgaW5kZXhcbiAgb25DaGFuZ2VTZWNvbmRzU2xpZGUoZXZlbnQpIHtcbiAgICB0aGlzLnNsaWRlclNlY29uZHNBY3RpdmVJbmRleCA9IGV2ZW50LnRhcmdldC5zd2lwZXIucmVhbEluZGV4O1xuICB9XG5cbiAgLy8gZ2V0IHNsaWRlciBzZWNvbmRzIGFjdGl2ZSBpbmRleFxuICBvbkNoYW5nZU1lcmlkaWFuU2xpZGUoZXZlbnQpIHtcbiAgICB0aGlzLnNsaWRlck1lcmlkaWFuQWN0aXZlSW5kZXggPSBldmVudC50YXJnZXQuc3dpcGVyLnJlYWxJbmRleDtcbiAgfVxuXG4gIC8vIGluaXRpYWxpemUgdGltZXBpY2tlciBPYmplY3RcbiAgaW5pdFRpbWVQaWNrZXJPYmplY3QoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZy5pbnB1dFRpbWUgJiYgIXRoaXMuc2VsZWN0ZWRUaW1lKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVGltZSA9IGNvbmZpZy5pbnB1dFRpbWU7XG4gICAgfVxuXG4gICAgY29uc3Qgb2JqQ29uZmlnOiBhbnkgPSB7fTtcbiAgICBvYmpDb25maWcubW9tZW50TG9jYWxlID0gY29uZmlnLm1vbWVudExvY2FsZSA/IGNvbmZpZy5tb21lbnRMb2NhbGUgOiAnZW4tVVMnO1xuICAgIG1vbWVudC5sb2NhbGUob2JqQ29uZmlnLm1vbWVudExvY2FsZSk7XG5cbiAgICBvYmpDb25maWcudGltZUZvcm1hdCA9IGNvbmZpZy50aW1lRm9ybWF0ID8gY29uZmlnLnRpbWVGb3JtYXQgOiAnaGg6bW0gQSc7XG4gICAgaWYgKHR5cGVvZiAodGhpcy5zZWxlY3RlZFRpbWUpID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5tb21lbnRPYmogPSB0aGlzLnNlbGVjdGVkVGltZSA/XG4gICAgICAgIG1vbWVudCh0aGlzLnNlbGVjdGVkVGltZSwgb2JqQ29uZmlnLnRpbWVGb3JtYXQpIDpcbiAgICAgICAgbW9tZW50KG1vbWVudChuZXcgRGF0ZSgpLmdldFRpbWUoKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vbWVudE9iaiA9IHRoaXMuc2VsZWN0ZWRUaW1lID9cbiAgICAgICAgbW9tZW50KHRoaXMuc2VsZWN0ZWRUaW1lKSA6XG4gICAgICAgIG1vbWVudChtb21lbnQobmV3IERhdGUoKS5nZXRUaW1lKCkpKTtcbiAgICB9XG5cbiAgICBvYmpDb25maWcuc2V0TGFiZWwgPSBjb25maWcuc2V0TGFiZWwgPyBjb25maWcuc2V0TGFiZWwgOiAnU2V0JztcbiAgICBvYmpDb25maWcuY2xvc2VMYWJlbCA9IGNvbmZpZy5jbG9zZUxhYmVsID8gY29uZmlnLmNsb3NlTGFiZWwgOiAnQ2xvc2UnO1xuICAgIG9iakNvbmZpZy50aXRsZUxhYmVsID0gY29uZmlnLnRpdGxlTGFiZWwgPyBjb25maWcudGl0bGVMYWJlbCA6ICdUaW1lJztcbiAgICBvYmpDb25maWcuYnRuQ2xvc2VTZXRJblJldmVyc2UgPSBjb25maWcuYnRuQ2xvc2VTZXRJblJldmVyc2UgPyBjb25maWcuYnRuQ2xvc2VTZXRJblJldmVyc2UgOiBmYWxzZTtcblxuICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzID0ge307XG4gICAgaWYgKGNvbmZpZy5idG5Qcm9wZXJ0aWVzKSB7XG4gICAgICBjb25zdCBidG5Qcm9wZXJ0aWVzID0gY29uZmlnLmJ0blByb3BlcnRpZXM7XG4gICAgICBvYmpDb25maWcuYnRuUHJvcGVydGllcy5leHBhbmQgPSBidG5Qcm9wZXJ0aWVzLmV4cGFuZCA/IGJ0blByb3BlcnRpZXMuZXhwYW5kIDogJ2Jsb2NrJztcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLmZpbGwgPSBidG5Qcm9wZXJ0aWVzLmZpbGwgPyBidG5Qcm9wZXJ0aWVzLmZpbGwgOiAnc29saWQnO1xuICAgICAgb2JqQ29uZmlnLmJ0blByb3BlcnRpZXMuc2l6ZSA9IGJ0blByb3BlcnRpZXMuc2l6ZSA/IGJ0blByb3BlcnRpZXMuc2l6ZSA6ICdkZWZhdWx0JztcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLmNvbG9yID0gYnRuUHJvcGVydGllcy5jb2xvciA/IGJ0blByb3BlcnRpZXMuY29sb3IgOiAnJztcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLmRpc2FibGVkID0gYnRuUHJvcGVydGllcy5kaXNhYmxlZCA/IGJ0blByb3BlcnRpZXMuZGlzYWJsZWQgOiBmYWxzZTtcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLnN0cm9uZyA9IGJ0blByb3BlcnRpZXMuc3Ryb25nID8gYnRuUHJvcGVydGllcy5zdHJvbmcgOiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqQ29uZmlnLmJ0blByb3BlcnRpZXMuZXhwYW5kID0gJ2Jsb2NrJztcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLmZpbGwgPSAnc29saWQnO1xuICAgICAgb2JqQ29uZmlnLmJ0blByb3BlcnRpZXMuc2l6ZSA9ICdkZWZhdWx0JztcbiAgICAgIG9iakNvbmZpZy5idG5Qcm9wZXJ0aWVzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBvYmpDb25maWcuYnRuUHJvcGVydGllcy5zdHJvbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iakNvbmZpZztcbiAgfVxuXG4gIC8vIGNsb3NlIG1vZGFsXG4gIGFzeW5jIGNsb3NlSW9uaWNUaW1lUGlja2VyTW9kYWwoKSB7XG4gICAgY29uc3QgbW9kYWwgPSBhd2FpdCB0aGlzLm1vZGFsQ3RybC5nZXRUb3AoKTtcbiAgICBtb2RhbC5kaXNtaXNzKCcnKTtcbiAgfVxuXG4gIC8vIHNldCB0aW1lIGluIG1vZGFsIGRpc21pc3MgbWV0aG9kXG4gIGFzeW5jIHNldElvbmljVGltZVBpY2tlclRpbWUoKSB7XG4gICAgY29uc3QgbW9kYWwgPSBhd2FpdCB0aGlzLm1vZGFsQ3RybC5nZXRUb3AoKTtcbiAgICB0aGlzLnNlbGVjdGVkVGltZSA9IHRoaXMuc2V0VGltZUluTW9tZW50T2JqZWN0KCk7XG4gICAgbW9kYWwuZGlzbWlzcyh7IHRpbWU6ICh0aGlzLnNlbGVjdGVkVGltZSkgfSk7XG4gIH1cblxuICAvLyBzZXQgdGltZSBpbiBtb21lbnQgb2JqZWN0XG4gIHNldFRpbWVJbk1vbWVudE9iamVjdCgpIHtcbiAgICBjb25zdCBmb3JtYXRlQXJyYXkgPSBbXTtcbiAgICBjb25zdCB0aW1lQXJyYXkgPSBbXTtcblxuICAgIGNvbnN0IGNoYXJaZXJvSW5Mb2NhbGUgPSBtb21lbnQoKS5zZWNvbmQoMCkuZm9ybWF0KCdzJyk7XG4gICAgLy8gY29uc29sZS5sb2coJ2NoYXJaZXJvSW5Mb2NhbGUgOiAnICsgY2hhclplcm9JbkxvY2FsZSk7XG4gICAgaWYgKHRoaXMubWFpbk9iai50aW1lRm9ybWF0LmluZGV4T2YoJ0gnKSA+PSAwKSB7XG4gICAgICBmb3JtYXRlQXJyYXkucHVzaCgnSCcpO1xuICAgICAgbGV0IGhvdXJTdHJpbmcgPSB0aGlzLmhvdXJzQXJyYXlbdGhpcy5zbGlkZXJIb3Vyc0FjdGl2ZUluZGV4XTtcbiAgICAgIC8vIGhvdXJTdHJpbmcgPSBob3VyU3RyaW5nLnJlcGxhY2UoL14wKy8sICcnKTtcbiAgICAgIHRpbWVBcnJheS5wdXNoKGhvdXJTdHJpbmcpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYWluT2JqLnRpbWVGb3JtYXQuaW5kZXhPZignaCcpID49IDApIHtcbiAgICAgIGZvcm1hdGVBcnJheS5wdXNoKCdoJyk7XG4gICAgICBsZXQgaG91clN0cmluZyA9IHRoaXMuaG91cnNBcnJheVt0aGlzLnNsaWRlckhvdXJzQWN0aXZlSW5kZXhdO1xuICAgICAgLy8gaG91clN0cmluZyA9IGhvdXJTdHJpbmcucmVwbGFjZSgvXjArLywgJycpO1xuICAgICAgdGltZUFycmF5LnB1c2goaG91clN0cmluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1haW5PYmoudGltZUZvcm1hdC5pbmRleE9mKCdrJykgPj0gMCkge1xuICAgICAgZm9ybWF0ZUFycmF5LnB1c2goJ2snKTtcbiAgICAgIGxldCBob3VyU3RyaW5nID0gdGhpcy5ob3Vyc0FycmF5W3RoaXMuc2xpZGVySG91cnNBY3RpdmVJbmRleF07XG4gICAgICAvLyBob3VyU3RyaW5nID0gaG91clN0cmluZy5yZXBsYWNlKC9eMCsvLCAnJyk7XG4gICAgICB0aW1lQXJyYXkucHVzaChob3VyU3RyaW5nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWFpbk9iai50aW1lRm9ybWF0LmluZGV4T2YoJ20nKSA+PSAwKSB7XG4gICAgICBmb3JtYXRlQXJyYXkucHVzaCgnbScpO1xuICAgICAgbGV0IG1pblN0cmluZyA9IHRoaXMubWludXRlc0FycmF5W3RoaXMuc2xpZGVyTWludXRlc0FjdGl2ZUluZGV4XTtcbiAgICAgIC8vIG1pblN0cmluZyA9IG1pblN0cmluZy5yZXBsYWNlKC9eMCsvLCAnJyk7XG4gICAgICB0aW1lQXJyYXkucHVzaChtaW5TdHJpbmcpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYWluT2JqLnRpbWVGb3JtYXQuaW5kZXhPZigncycpID49IDApIHtcbiAgICAgIGZvcm1hdGVBcnJheS5wdXNoKCdzJyk7XG4gICAgICBsZXQgc2VjU3RyaW5nID0gdGhpcy5zZWNvbmRzQXJyYXlbdGhpcy5zbGlkZXJTZWNvbmRzQWN0aXZlSW5kZXhdO1xuICAgICAgLy8gc2VjU3RyaW5nID0gc2VjU3RyaW5nLnJlcGxhY2UoL14wKy8sICcnKTtcbiAgICAgIHRpbWVBcnJheS5wdXNoKHNlY1N0cmluZyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1haW5PYmoudGltZUZvcm1hdC5pbmRleE9mKCdhJykgPj0gMCB8fCB0aGlzLm1haW5PYmoudGltZUZvcm1hdC5pbmRleE9mKCdBJykgPj0gMCkge1xuICAgICAgZm9ybWF0ZUFycmF5LnB1c2goJ2EnKTtcbiAgICAgIGxldCBtZXJpZGlhblN0cmluZyA9IHRoaXMubWVyaWRpYW5BcnJheVt0aGlzLnNsaWRlck1lcmlkaWFuQWN0aXZlSW5kZXhdLnRvTG93ZXJDYXNlKCk7XG4gICAgICB0aW1lQXJyYXkucHVzaChtZXJpZGlhblN0cmluZyk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0ZVN0cmluZyA9IGZvcm1hdGVBcnJheS5qb2luKCc6Jyk7XG4gICAgY29uc3QgdGltZVN0cmluZyA9IHRpbWVBcnJheS5qb2luKCc6Jyk7XG4gICAgLy8gdGhpcy5tb21lbnRPYmogPSBtbU9iajtcbiAgICAvLyBjb25zb2xlLmxvZygndGltZVN0cmluZzogJyArIHRpbWVTdHJpbmcgKyAnICBmb3JtYXRlU3RyaW5nOiAnICsgZm9ybWF0ZVN0cmluZyk7XG4gICAgY29uc3QgbW1PYmogPSBtb21lbnQodGltZVN0cmluZywgZm9ybWF0ZVN0cmluZyk7XG4gICAgcmV0dXJuIG1tT2JqLmZvcm1hdCh0aGlzLm1haW5PYmoudGltZUZvcm1hdCk7XG4gIH1cblxuICAvLyBzZXRzIGhvdXJzIGFycmF5XG4gIHNldEhvdXJzQXJyYXkodGltZUZvcm1hdCkge1xuICAgIGNvbnN0IG9iaiA9IG1vbWVudCgpLnN0YXJ0T2YoJ2RhdGUnKTtcbiAgICBpZiAodGltZUZvcm1hdC5pbmRleE9mKCdISCcpID49IDApIHtcbiAgICAgIHRoaXMuaG91cnNBcnJheSA9IHRoaXMuaW5pdEhvdXJzQXJyYXkob2JqLCAyMywgJ0hIJyk7XG4gICAgICB0aGlzLnNsaWRlT3B0c0hvdXJzLmluaXRpYWxTbGlkZSA9IHRoaXMubW9tZW50T2JqLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ0hIJyk7XG5cbiAgICB9IGVsc2UgaWYgKHRpbWVGb3JtYXQuaW5kZXhPZignSCcpID49IDApIHtcbiAgICAgIHRoaXMuaG91cnNBcnJheSA9IHRoaXMuaW5pdEhvdXJzQXJyYXkob2JqLCAyMywgJ0gnKTtcbiAgICAgIHRoaXMuc2xpZGVPcHRzSG91cnMuaW5pdGlhbFNsaWRlID0gdGhpcy5tb21lbnRPYmoubG9jYWxlKCdlbicpLmZvcm1hdCgnSCcpO1xuXG4gICAgfSBlbHNlIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ2hoJykgPj0gMCkge1xuICAgICAgdGhpcy5ob3Vyc0FycmF5ID0gdGhpcy5pbml0SG91cnNBcnJheShvYmouYWRkKDEsICdob3VycycpLCAxMSwgJ2hoJyk7XG4gICAgICB0aGlzLnNsaWRlT3B0c0hvdXJzLmluaXRpYWxTbGlkZSA9IHRoaXMubW9tZW50T2JqLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2hoJykgLSAxO1xuXG4gICAgfSBlbHNlIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ2gnKSA+PSAwKSB7XG4gICAgICB0aGlzLmhvdXJzQXJyYXkgPSB0aGlzLmluaXRIb3Vyc0FycmF5KG9iai5hZGQoMSwgJ2hvdXJzJyksIDExLCAnaCcpO1xuICAgICAgdGhpcy5zbGlkZU9wdHNIb3Vycy5pbml0aWFsU2xpZGUgPSB0aGlzLm1vbWVudE9iai5sb2NhbGUoJ2VuJykuZm9ybWF0KCdoJykgLSAxO1xuXG4gICAgfSBlbHNlIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ2trJykgPj0gMCkge1xuICAgICAgdGhpcy5ob3Vyc0FycmF5ID0gdGhpcy5pbml0SG91cnNBcnJheShvYmouYWRkKDEsICdob3VycycpLCAyMywgJ2trJyk7XG4gICAgICB0aGlzLnNsaWRlT3B0c0hvdXJzLmluaXRpYWxTbGlkZSA9IHRoaXMubW9tZW50T2JqLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2trJykgLSAxO1xuXG4gICAgfSBlbHNlIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ2snKSA+PSAwKSB7XG4gICAgICB0aGlzLmhvdXJzQXJyYXkgPSB0aGlzLmluaXRIb3Vyc0FycmF5KG9iai5hZGQoMSwgJ2hvdXJzJyksIDIzLCAnaycpO1xuICAgICAgdGhpcy5zbGlkZU9wdHNIb3Vycy5pbml0aWFsU2xpZGUgPSB0aGlzLm1vbWVudE9iai5sb2NhbGUoJ2VuJykuZm9ybWF0KCdrJykgLSAxO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnaG91cnMgYXJyYXkgPT4nLCB0aGlzLmhvdXJzQXJyYXkpO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSBob3VycyBhcnJheVxuICBpbml0SG91cnNBcnJheShtb21lbnRPYmosIGVuZCwgZm9ybWF0KSB7XG4gICAgY29uc3QgaG91cnNBcnJheTogYW55ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgIGhvdXJzQXJyYXkucHVzaChtb21lbnRPYmouZm9ybWF0KGZvcm1hdCkpO1xuICAgICAgbW9tZW50T2JqLmFkZCgxLCAnaG91cnMnKTtcbiAgICB9XG4gICAgcmV0dXJuIGhvdXJzQXJyYXk7XG4gIH1cblxuICAvLyBzZXRzIG1pbnV0ZXMgYXJyYXlcbiAgc2V0TWludXRlc0FycmF5KHRpbWVGb3JtYXQpIHtcbiAgICBpZiAodGltZUZvcm1hdC5pbmRleE9mKCdtbScpID49IDApIHtcbiAgICAgIHRoaXMubWludXRlc0FycmF5ID0gdGhpcy5pbml0TWludXRlc0FycmF5KCdtbScpO1xuICAgICAgdGhpcy5zbGlkZU9wdHNNaW51dGVzLmluaXRpYWxTbGlkZSA9IE51bWJlcih0aGlzLm1vbWVudE9iai5mb3JtYXQoJ21tJykpO1xuICAgIH0gZWxzZSBpZiAodGltZUZvcm1hdC5pbmRleE9mKCdtJykgPj0gMCkge1xuICAgICAgdGhpcy5taW51dGVzQXJyYXkgPSB0aGlzLmluaXRNaW51dGVzQXJyYXkoJ20nKTtcbiAgICAgIHRoaXMuc2xpZGVPcHRzTWludXRlcy5pbml0aWFsU2xpZGUgPSBOdW1iZXIodGhpcy5tb21lbnRPYmouZm9ybWF0KCdtJykpO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnbWludXRlcyBhcnJheSA9PicsIHRoaXMubWludXRlc0FycmF5KTtcbiAgfVxuXG4gIC8vIGluaXRpYWxpemUgbWludXRlcyBhcnJheVxuICBpbml0TWludXRlc0FycmF5KGZvcm1hdCkge1xuICAgIGNvbnN0IG9iaiA9IG1vbWVudCgpLnN0YXJ0T2YoJ2hvdXInKTtcbiAgICBjb25zdCBtaW51dGVzQXJyYXk6IGFueSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjA7IGkrKykge1xuICAgICAgbWludXRlc0FycmF5LnB1c2gob2JqLmZvcm1hdChmb3JtYXQpKTtcbiAgICAgIG9iai5hZGQoMSwgJ21pbnV0ZXMnKTtcbiAgICB9XG4gICAgcmV0dXJuIG1pbnV0ZXNBcnJheTtcbiAgfVxuXG4gIC8vIHNldHMgc2Vjb25kcyBhcnJheVxuICBzZXRTZWNvbmRzQXJyYXkodGltZUZvcm1hdCkge1xuICAgIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ3NzJykgPj0gMCkge1xuICAgICAgdGhpcy5zZWNvbmRzQXJyYXkgPSB0aGlzLmluaXRTZWNvbmRzQXJyYXkoJ3NzJyk7XG4gICAgICB0aGlzLnNsaWRlT3B0c1NlY29uZHMuaW5pdGlhbFNsaWRlID0gTnVtYmVyKHRoaXMubW9tZW50T2JqLmZvcm1hdCgnc3MnKSk7XG4gICAgfSBlbHNlIGlmICh0aW1lRm9ybWF0LmluZGV4T2YoJ3MnKSA+PSAwKSB7XG4gICAgICB0aGlzLnNlY29uZHNBcnJheSA9IHRoaXMuaW5pdFNlY29uZHNBcnJheSgncycpO1xuICAgICAgdGhpcy5zbGlkZU9wdHNTZWNvbmRzLmluaXRpYWxTbGlkZSA9IE51bWJlcih0aGlzLm1vbWVudE9iai5mb3JtYXQoJ3MnKSk7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdzZWNvbmRzIGFycmF5ID0+JywgdGhpcy5zZWNvbmRzQXJyYXkpO1xuICB9XG5cbiAgLy8gaW5pdGlhbGl6ZSBzZWNvbmRzIGFycmF5XG4gIGluaXRTZWNvbmRzQXJyYXkoZm9ybWF0KSB7XG4gICAgY29uc3Qgb2JqID0gbW9tZW50KCkuc3RhcnRPZignbWludXRlJyk7XG4gICAgY29uc3Qgc2Vjb25kc0FycmF5OiBhbnkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDYwOyBpKyspIHtcbiAgICAgIHNlY29uZHNBcnJheS5wdXNoKG9iai5mb3JtYXQoZm9ybWF0KSk7XG4gICAgICBvYmouYWRkKDEsICdzZWNvbmRzJyk7XG4gICAgfVxuICAgIHJldHVybiBzZWNvbmRzQXJyYXk7XG4gIH1cblxuICAvLyBzZXQgbWVyaWRpYW4gYXJyYXlcbiAgc2V0TWVyaWRpYW5BcnJheSh0aW1lRm9ybWF0KSB7XG4gICAgaWYgKHRpbWVGb3JtYXQuaW5kZXhPZignYScpID49IDAgfHwgdGltZUZvcm1hdC5pbmRleE9mKCdBJykgPj0gMCkge1xuICAgICAgY29uc3QgZm9ybWF0ID0gdGltZUZvcm1hdC5pbmRleE9mKCdhJykgPj0gMCA/ICdhJyA6ICdBJztcbiAgICAgIGNvbnN0IG9iaiA9IG1vbWVudCgpLnN0YXJ0T2YoJ2RhdGUnKTtcbiAgICAgIHRoaXMubWVyaWRpYW5BcnJheS5wdXNoKG9iai5mb3JtYXQoZm9ybWF0KSk7XG4gICAgICB0aGlzLm1lcmlkaWFuQXJyYXkucHVzaChvYmouYWRkKDEyLCAnaG91cnMnKS5mb3JtYXQoZm9ybWF0KSk7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdtZXJpZGlhbiBhcnJheSA9PicsIHRoaXMubWVyaWRpYW5BcnJheSk7XG5cbiAgICBpZiAodGltZUZvcm1hdC5pbmRleE9mKCdhJykgPj0gMCkge1xuICAgICAgdGhpcy5zbGlkZU9wdHNNZXJpZGlhbi5pbml0aWFsU2xpZGUgPSB0aGlzLm1vbWVudE9iai5mb3JtYXQoJ2EnKSA9PT0gJ2FtJyA/IDAgOiAxO1xuICAgIH0gZWxzZSBpZiAodGltZUZvcm1hdC5pbmRleE9mKCdBJykgPj0gMCkge1xuICAgICAgdGhpcy5zbGlkZU9wdHNNZXJpZGlhbi5pbml0aWFsU2xpZGUgPSB0aGlzLm1vbWVudE9iai5mb3JtYXQoJ0EnKSA9PT0gJ0FNJyA/IDAgOiAxO1xuICAgIH1cbiAgfVxufVxuXG5cblxuIl19